var _AT=_AT||{};(function(){_AT.config=r({atServer:"https://cdn.tt.omtrdc.net/cdn/cdn.tt.omtrdc.net",atLocation:"/cdn",allowedDomainRegex:"^https\\:\\/\\/.+\\.(experiencecloud|marketing)(-stage)?\\.adobe\\.com$",checkAllowedOrigin:true,},_AT.config);var h={AT_CONNECT:"at-connect",TARGET_HANDSHAKE_ACK:"targetjsHandShakeAck",TARGET_HANDSHAKE:"targetjsHandShake"};function r(){var v={},t;for(t=0;t<arguments.length;t++){var u=arguments[t];for(var w in u){v[w]=u[w]}}return v}function l(w,v,u){var t=u;if(w.attachEvent&&typeof w.attachEvent==="function"){t=function(){u.call(w,window.event)};w.attachEvent("on"+v,u)}else{if(w.addEventListener){w.addEventListener(v,t,false)}}return t}function c(v,u,t){if(v.detachEvent){v.detachEvent("on"+u,t)}else{v.removeEventListener(u,t,false)}}function m(v,u){var t=document.createElement("script");t.type="text/javascript";t.src=v;if(typeof u==="function"){t.onload=u}e(t)}function k(u,v){var t=document.createElement("link");t.rel="stylesheet";t.type="text/css";t.href=u;if(typeof v==="function"){t.onload=v}e(t)}function e(u){var t=(document.getElementsByTagName("head")||document.getElementsByTagName("body"))[0];t.appendChild(u)}function b(t){return _AT.config.allowedDomainRegex&&new RegExp(_AT.config.allowedDomainRegex,"i").test(t)}function f(u,t){if(t.updatePageURL&&t.pageURL.indexOf("javascript:")===-1){window.location.href=t.pageURL}else{if(o(t)){a(u,t.connectConfig)}}}function o(t){return t.autoConnect&&t.connectConfig&&(window.document.readyState==="complete")}function d(){window.cdq.host.enableLogger(_AT.cdqConfig.isLoggerEnabled)}function j(){var t=window._AT;d();window.cdq.host.log("debug","Dependencies loaded!");window.cdq.host.log("debug","trying to connect");window.cdq.host.connect(t.connectEvent)}function g(){n("/adobetarget/admin");s("/target-vec-helper",j)}function n(t,u){k("//"+_AT.config.atServer+_AT.config.atLocation+t+".css",u)}function s(t,u){m("//"+_AT.config.atServer+_AT.config.atLocation+t+".js",u)}function i(x){var t=x.origin||"",w,v=window._AT;if(v.config.checkAllowedOrigin&&!b(t)){return}if(typeof x.data!=="string"){return}try{w=(v.JSON||JSON).parse(x.data)}catch(u){console.error("Invalid JSON in message data, ignored",u);return}if(w.action===h.TARGET_HANDSHAKE_ACK){f(x,w.config)}else{if(w.action===h.AT_CONNECT){a(x,w.config)}}}function a(w,t){var v=window._AT,u;if(v.isConnectedToClient){return}v.connectEvent={};v.cdqConfig={};for(u in w){if(w[u]){v.connectEvent[u]=w[u]}}for(u in t){if({}.hasOwnProperty.call(t,u)){v.cdqConfig[u]=t[u]}}v.isConnectedToClient=true;g();c(window,"message",i)}var p=document.createElement("iframe");l(p,"load",function(){if(!_AT.JSON){_AT.JSON=p.contentWindow.JSON}document.head.removeChild(p)});p.style.display="none";if(document.domain!==window.location.host){p.src="javascript:'<script>window.onload=function(){document.write(\\'<script>document.domain=\\\""+document.domain+"\\\";<\\\\/script>\\');document.close();};<\/script>'"}document.head.appendChild(p);if(typeof _AT.eventListenerAdded=="undefined"){l(window,"message",i);_AT.eventListenerAdded=true}if(window!=top){var q=_AT.JSON||JSON;if(typeof q!=="undefined"){window.parent.postMessage(q.stringify({action:h.TARGET_HANDSHAKE,pageURL:window.location.toString(),isAdmin:window.location.toString().indexOf("mboxEdit=1")!==-1||window.location.toString().indexOf("adobe_authoring_enabled=1")!==-1}),"*")}}})();